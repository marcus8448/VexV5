include(CMakeDependentOption)
set(CMAKE_BUILD_TYPE MinSizeRel)

option(ENABLE_DEBUG_LOGGING "Enable debug logging" ON)
option(ENABLE_FILE_LOGGING "Enable writing logs to the microSD card" ON)
option(USE_ARCADE_DRIVE "Use arcade drive by default" OFF)

option(DISABLE_AUTONOMOUS "Disable autonomous code" OFF)

option(DISABLE_SCREEN "Disable screen code" OFF)

cmake_dependent_option(DISABLE_CONFIG_SCREEN "Disable the configuration screen" OFF "NOT DISABLE_SCREEN" ON)
cmake_dependent_option(DISABLE_AUTONOMOUS_SELECTION_SCREEN "Disable the autonomous selection screen" OFF "NOT DISABLE_SCREEN;NOT DISABLE_AUTONOMOUS" ON)
cmake_dependent_option(DISABLE_DRIVETRAIN_DEBUG_SCREEN "Disable the drivetrain debug screen" OFF "NOT DISABLE_SCREEN" ON)

option(DISABLE_SERIAL "Disable serial communication code" ON)
option(ENABLE_TEMPORARY_CODE "Load and run code in src/temporary.hpp" OFF)

if (ENABLE_DEBUG_LOGGING)
    add_compile_definitions(DEBUG_LOG)
endif()

if (ENABLE_FILE_LOGGING)
    add_compile_definitions(FILE_LOG)
endif()

if (USE_ARCADE_DRIVE)
    add_compile_definitions(ARCADE_DRIVE)
endif()

if (DISABLE_AUTONOMOUS)
    add_compile_definitions(DISABLE_AUTONOMOUS)
endif()

if (DISABLE_SCREEN)
    add_compile_definitions(DISABLE_SCREEN)
else()
    if (DISABLE_CONFIG_SCREEN)
        add_compile_definitions(DISABLE_CONFIG_SCREEN)
    endif()
    if (DISABLE_CONFIG_SCREEN)
        add_compile_definitions(DISABLE_CONFIG_SCREEN)
    endif()
    if (DISABLE_AUTONOMOUS OR DISABLE_AUTONOMOUS_SELECTION_SCREEN)
        add_compile_definitions(DISABLE_AUTONOMOUS_SELECTION_SCREEN)
    endif()
    if (DISABLE_DRIVETRAIN_DEBUG_SCREEN)
        add_compile_definitions(DISABLE_DRIVETRAIN_DEBUG_SCREEN)
    endif()
endif()

if (DISABLE_SERIAL)
    add_compile_definitions(DISABLE_SERIAL)
endif()

if (ENABLE_TEMPORARY_CODE)
    file(TOUCH ${CMAKE_SOURCE_DIR}/src/temporary.hpp)
endif()
